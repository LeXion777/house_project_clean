{% extends "layout.html" %}

{% block title %}{{ data.title }} | 대출 상세정보{% endblock %}

{# main 태그에 클래스 추가 #}
{% block main_class %}detail-main{% endblock %}

{# 이 블록 이름이 핵심: page_css #}
{% block page_css %}
<style>
    /* 메인 배경 덮어쓰기 */
    .detail-main {
        background: #f5f7fb;   /* 살짝 연한 회색/파랑 톤 */
        padding-top: 24px;
        padding-bottom: 40px;
    }

    .detail-page-container {
        max-width: 960px;
        margin: 0 auto;
    }

    /* ===== 상단 정책명 박스 ===== */
    .detail-header {
        background: #ffffff;
        border-radius: 16px;
        padding: 24px 28px;
        margin-bottom: 28px;
        border: 1px solid #e3e7f0;
        box-shadow: 0 6px 18px rgba(0,0,0,0.08);
    }

    .detail-title {
        font-size: 1.8rem;
        font-weight: 800;
        color: #1f2d3d;
        margin-bottom: 6px;
        line-height: 1.35;
    }

    .detail-subtitle {
        font-size: 1rem;
        color: #5a6a85;
        line-height: 1.5;
    }

    /* ===== 요약 박스 ===== */
    .summary-card {
        border-radius: 14px !important;
        border: 1px solid #E6EAF0;
        box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        margin-bottom: 24px;
        overflow: hidden;
    }
    .summary-card .list-group-item {
        border: none;
        border-bottom: 1px solid #F2F4F7;
        padding: 14px 4px;
    }
    .summary-card .list-group-item:last-child {
        border-bottom: none;
    }
    .summary-card ul li strong {
        font-weight: 700;
        color: #385FAC;
    }
    .summary-card .btn-primary {
        background: #385FAC;
        border: none;
    }
    .summary-card .btn-primary:hover {
        background: #274B91;
    }

    /* ===== 아코디언 ===== */
    .accordion-item {
        border-radius: 12px !important;
        overflow: hidden;
        border: 1px solid #E6EAF0 !important;
        margin-bottom: 14px;
        background: #FFFFFF;
    }
    .accordion-button {
        padding: 18px 22px;
        font-size: 1.05rem;
        font-weight: 700;
        color: #273B5B;
        background: #F7F9FC;
        border: none;
    }
    .accordion-button:not(.collapsed) {
        color: #385FAC;
        background: #E9F0FF;
        box-shadow: inset 0 -1px 0 rgba(0,0,0,0.07);
    }
    .accordion-body {
        padding: 20px 24px;
        font-size: 0.96rem;
        line-height: 1.6;
    }
    .accordion-body ul li {
        margin-bottom: 6px;
    }
    .accordion-button::after {
        filter: hue-rotate(175deg) brightness(0.7);
    }
</style>
{% endblock %}

{% block content %}
<div class="container py-4 detail-page-container">

    <!-- 뒤로가기 -->
    <a href="{{ return_url }}" class="btn btn-outline-secondary btn-sm mb-3">
        ← 뒤로가기
    </a>

    <!-- 상단 정책명 + 설명 박스 -->
    <div class="detail-header">
        <div class="detail-title">{{ data.title }}</div>
        {% if data.subtitle %}
        <div class="detail-subtitle">{{ data.subtitle }}</div>
        {% endif %}
    </div>

    <!-- 요약 박스 -->
    <div class="card summary-card mb-4">
        <div class="card-body">
            <ul class="list-group list-group-flush">
                {% for item in data.summary %}
                <li class="list-group-item py-3">
                    <strong>{{ item.label }}</strong><br>
                    <span>{{ item.value }}</span>
                </li>
                {% endfor %}
            </ul>

            {% if data.homepage_url %}
            <div class="mt-3">
                <a href="{{ data.homepage_url }}" target="_blank" class="btn btn-primary btn-sm">
                    관련 사이트 바로가기
                </a>
            </div>
            {% endif %}
        </div>
    </div>

    <!-- 상세 내용 아코디언 -->
    <div class="accordion" id="policyAccordion">
        {% for section in data.sections %}
        <div class="accordion-item">
            <h2 class="accordion-header" id="heading{{ loop.index }}">
                <button class="accordion-button {% if not loop.first %}collapsed{% endif %}"
                        type="button"
                        data-bs-toggle="collapse"
                        data-bs-target="#collapse{{ loop.index }}">
                    {{ loop.index }}. {{ section.title }}
                </button>
            </h2>

            <div id="collapse{{ loop.index }}"
                 class="accordion-collapse collapse {% if loop.first %}show{% endif %}"
                 data-bs-parent="#policyAccordion">

                <div class="accordion-body">
                    {% if section.items %}
                    <ul class="mb-0">
                        {% for item in section["items"] %}
                        <li>{{ item }}</li>
                        {% endfor %}
                    </ul>
                    {% else %}
                    <p class="text-muted">내용 없음</p>
                    {% endif %}
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

</div>
{% endblock %}
